{
  "version": 3,
  "sources": ["../src/index.ts", "../src/Types.ts", "../src/expandFunction.ts", "../src/util.ts", "../src/extractVariables.ts", "../src/formatLess.ts", "../src/monitor.ts"],
  "sourcesContent": ["import path from 'path';\nimport { globby } from 'globby';\nimport fs from 'fs-extra';\nimport { expandFunction, getLessFunction } from './expandFunction';\nimport { extractVariables } from './extractVariables';\nimport { formatLess } from './formatLess';\nimport { monitor } from './monitor';\nimport {\n  getLessVariable,\n  getFileUTF8,\n  transferAbsolutePath,\n  lessToCss,\n  removeComments,\n  getUserConfig,\n} from './util';\nimport {\n  lessysConfigProps,\n  themeConfigProps,\n  themeItemProps,\n  strObjProps,\n  funcDefinedProps,\n} from './Types';\n\n// \u6839\u636E \u516C\u7528\u53D8\u91CF\u3001\u51FD\u6570 \u5220\u9664\u4E00\u4E9B\u4E0E\u6362\u80A4\u65E0\u5173\u7ED3\u6784\u3002\n// accept: \u4E00\u4E2A less \u5B57\u7B26\u4E32\uFF0C\u516C\u7528\u53D8\u91CF\u3001\u51FD\u6570\n// return: \u4E00\u4E2A\u5904\u7406\u540E\u7684 less \u5B57\u7B26\u4E32\u3002\nexport const extractLess = async (\n  lessStr: string,\n  variable: strObjProps,\n  func_defined?: { [name: string]: funcDefinedProps }\n): Promise<string> => {\n  return formatLess(lessStr)\n    .then((str) => expandFunction(str, func_defined))\n    .then((str) => extractVariables(str, variable));\n};\n\n// \u83B7\u53D6\u5355\u4E2A theme \u4E2D\u7684 less \u53D8\u91CF\u548C\u51FD\u6570\n// accept: \u4E00\u4E2A less \u6587\u4EF6\u8DEF\u5F84\n// return: \u6B64 less \u6587\u4EF6\u7684 \u53D8\u91CF\uFF0C\u51FD\u6570\u53D8\u91CF\uFF0C\u4EE5\u53CA less \u5B57\u7B26\u4E32\u3002\nexport const getThemeVariables = async (\n  themePath: string\n): Promise<\n  Omit<\n    themeItemProps,\n    | 'originLessPath'\n    | 'outputCssPath'\n    | 'outputCssName'\n    | 'cateKey'\n    | 'outputLessName'\n  >\n> => {\n  const lessStr = await getFileUTF8(themePath).then(removeComments);\n  const lessVariables = getLessVariable(lessStr);\n  const lessFunction = await getLessFunction(lessStr);\n  return {\n    lessVariables,\n    lessFunction,\n    lessStr,\n  };\n};\n\n// accept: \u4E00\u4E2A\u6362\u80A4 theme \u6587\u4EF6\u914D\u7F6E: Blue.less\n// return: \u6B64\u6587\u4EF6\u5C06\u751F\u6210\u7684\u6587\u4EF6\u914D\u7F6E: Blue.css ...\nexport const getSingleTheme = async (\n  data: themeConfigProps\n): Promise<themeItemProps> => {\n  const variables = await getThemeVariables(data.themePath);\n  const cssName = path.parse(data.themePath).name + '.css'; // Default.css\n  const lessName = path.parse(data.themePath).name + '.less'; // Default.less\n  const outputCssPath = path.join(data.outputDir, data.cateKey + '/' + cssName);\n  const originLessPath = path.resolve(data.themePath);\n  return {\n    originLessPath,\n    outputCssPath: path.resolve(outputCssPath),\n    outputCssName: cssName,\n    outputLessName: lessName,\n    cateKey: data.cateKey,\n    ...variables,\n  };\n};\n\n// accept: \u6B64\u63D2\u4EF6\u5BF9\u5916\u66B4\u9732\u7684\u914D\u7F6E\n// return: \u6240\u6709 theme \u7684\u914D\u7F6E\u5217\u8868\nexport const getCommonTheme = async (\n  config: lessysConfigProps\n): Promise<themeItemProps[]> => {\n  let pathList: any = [];\n  for (const cateKey in config.theme) {\n    config.theme[cateKey].forEach((itemPath) => {\n      pathList.push({\n        cateKey,\n        themePath: itemPath,\n        outputDir: config.outputDir,\n      });\n    });\n  }\n  return await Promise.all(pathList.map(getSingleTheme));\n};\n\n// \u6620\u5C04 D:\\lessys\\__tests__\\components\\button\\style.less  ->\n//      D:\\lessys\\.theme\\monitor\\button\\color\\Default.less\n//      D:\\lessys\\.theme\\monitor\\button\\color\\Blue.less\n//      ...\nexport const generateOneLess = async (\n  commonThemeList: themeItemProps[],\n  config: lessysConfigProps,\n  lessFilePath: string\n) => {\n  const outputcomponentDirPath = path.resolve(config.outputDir, 'monitor'); // D:\\lessys\\.theme\\monitor\n  const componentDirPath = path.resolve(config.componentDir); // D:\\lessys\\__tests__\\components\n  lessFilePath = path.resolve(lessFilePath);\n  return getFileUTF8(lessFilePath).then((lessStr) => {\n    // #1 \u5C06 lessStr \u4E2D\u7684\u76F8\u5BF9\u8DEF\u5F84\u8F6C\u6362\u4E3A \u7EDD\u5BF9\u8DEF\u5F84\n    const pathParser = path.parse(lessFilePath);\n    lessStr = transferAbsolutePath(lessStr, pathParser.dir);\n\n    // #2 \u6839\u636E commonThemeList \u751F\u6210 component \u7EA7\u7684 less \u6587\u4EF6\n    return Promise.all(\n      commonThemeList.map((item) => {\n        return extractLess(\n          lessStr,\n          item.lessVariables,\n          item.lessFunction.funcDefined\n        ).then(async (outputLessStr) => {\n          // \u7EC4\u88C5 output less \u6587\u4EF6\u7684\u8DEF\u5F84\n          // TODO: output css | \u8FD4\u56DE\u683C\u5F0F\n          const outputLessPath = path.join(\n            pathParser.dir.replace(componentDirPath, outputcomponentDirPath),\n            item.cateKey,\n            item.outputLessName\n          );\n          const outputCssPath = path.join(\n            pathParser.dir.replace(componentDirPath, outputcomponentDirPath),\n            item.cateKey,\n            item.outputCssName\n          );\n\n          const cssStr = await lessToCss(outputLessStr, item);\n          const result = {\n            outputLessPath,\n            outputCssStr: cssStr,\n            outputThemeCssPath: item.outputCssPath,\n          };\n          await Promise.all([\n            fs\n              .createFile(outputLessPath)\n              .then(() => fs.writeFile(outputLessPath, outputLessStr)),\n            fs\n              .createFile(outputCssPath)\n              .then(() => fs.writeFile(outputCssPath, cssStr)),\n          ]);\n          return result;\n        });\n      })\n    );\n  });\n};\n\nexport const transferComponentLess = async (\n  commonThemeList: themeItemProps[],\n  config: lessysConfigProps\n) => {\n  const monitorFileRegx = config.componentDir + '/**/*.less'; // D:\\lessys\\__tests__\\components\\**\\*.less\n  const lessPaths = await globby(monitorFileRegx);\n  return (\n    Promise.all(\n      // \u751F\u6210 .theme/monitor/**/*.less \u6587\u4EF6\n      lessPaths.map((lessPath) =>\n        generateOneLess(commonThemeList, config, lessPath)\n      )\n    )\n      // merge css:  \u5404\u4E2A\u7EC4\u4EF6\u540C\u7C7B\u7684 css \u6587\u4EF6\uFF0C\u751F\u6210 .theme/color/*.css \u6587\u4EF6\n      .then((results) => {\n        const themeCssMap: strObjProps = {};\n        results.forEach((arr) => {\n          arr.forEach((item) => {\n            let key = item.outputThemeCssPath;\n            let value = item.outputCssStr;\n            if (themeCssMap[key]) {\n              themeCssMap[key] += value;\n            } else {\n              themeCssMap[key] = value;\n            }\n          });\n        });\n        return themeCssMap;\n      })\n      .then((themeCssMap) => {\n        return Promise.all([\n          Object.keys(themeCssMap).map((themeCssPath) => {\n            return fs\n              .createFile(themeCssPath)\n              .then(() =>\n                fs.writeFile(themeCssPath, themeCssMap[themeCssPath])\n              );\n          }),\n        ]).then(() => 'success');\n      })\n  );\n};\n\nexport const main = async () => {\n  const config: lessysConfigProps = await getUserConfig();\n\n  // #1 \u83B7\u53D6\u4E3B\u9898\u7684\u914D\u7F6E\u5217\u8868\n  const commonThemeList = await getCommonTheme(config);\n  // #2 \u751F\u6210 .theme/monitor/**/*.less \u6587\u4EF6\n  await transferComponentLess(commonThemeList, config);\n  if (config.watching) {\n    monitor();\n  }\n};\n\nmain();\n", "export interface themeDirProps {\n  [name: string]: string[];\n}\n\nexport interface strObjProps {\n  [name: string]: string;\n}\n\nexport interface funcDefinedProps {\n  type: lessFuncTypeEnum.defined;\n  name: string;\n  start: number; // \u6807\u8BB0\u5B9A\u4E49\u51FD\u6570 \u5F00\u59CB\u7684 index\n  end: number; // \u6807\u8BB0\u5B9A\u4E49\u51FD\u6570 \u7ED3\u675F\u7684 index\n  params: string[];\n  content: string;\n}\n\nexport interface funcUsedProps {\n  type: lessFuncTypeEnum.used;\n  name: string;\n  start: number; // \u6807\u8BB0\u4F7F\u7528\u51FD\u6570 \u5F00\u59CB\u7684 index\n  end: number; // \u6807\u8BB0\u4F7F\u7528\u51FD\u6570 \u7ED3\u675F\u7684 index\n  params: string[];\n}\n\nexport interface lessFunctionProps {\n  funcUsedList: funcUsedProps[]; // \u5F53\u524D less string \u7528\u5230\u7684\u6240\u6709 function name\n  funcDefined: {\n    [name: string]: funcDefinedProps;\n  };\n}\nexport interface lessysConfigProps {\n  theme: {\n    [name: string]: string[];\n  };\n  componentDir: string;\n  outputDir: string; // '.theme'\n  watching: boolean; // \u76D1\u63A7 componentDir \u6587\u4EF6\u5939\u4E2D\u7684 less \u6587\u4EF6\u662F\u5426\u53D8\u66F4\n}\n\nexport interface themeItemProps {\n  originLessPath: string; // \u539F\u59CB\u7684 theme less \u8DEF\u5F84,\n  outputCssPath: string; // \u6700\u7EC8\u8F93\u51FA\u7684 theme css \u8DEF\u5F84\n  outputCssName: string; // \u6700\u7EC8\u8F93\u51FA\u7684 theme less \u8DEF\u5F84\n  outputLessName: string; // \u6700\u7EC8\u8F93\u51FA\u7684 theme less \u540D: Default.less\n  cateKey: string; // color | layout\n  lessVariables: strObjProps; // theme less \u7684\u53D8\u91CF\n  lessFunction: lessFunctionProps; // theme less \u7684\u51FD\u6570\u53D8\u91CF\n  lessStr: string; // theme less \u5B57\u7B26\u4E32\n}\n\nexport interface themeConfigProps {\n  themePath: string;\n  cateKey: string;\n  outputDir: string;\n}\n\nexport interface lessVariablesObjProps {\n  [name: string]: {\n    lessVariables: strObjProps;\n    lessFunction: lessFunctionProps;\n  };\n}\nexport enum lessFuncTypeEnum {\n  'used' = 'used',\n  'defined' = 'defined',\n  'others' = 'others',\n}\n\nexport interface monitorLessFileProps {\n  [name: string]: {\n    [name: string]: string;\n  };\n}\n", "import {\n  strObjProps,\n  lessFunctionProps,\n  funcDefinedProps,\n  funcUsedProps,\n  lessFuncTypeEnum,\n} from './Types';\n\nconst REGX_func_name = /\\.[a-zA-Z]*(?=\\()/g; // \u5339\u914D .getTagName( \u7B49\u51FD\u6570\u540D\nconst REGX_space = /\\s/g; // \u6B63\u5219 \u7A7A\u683C\nconst REGX_used_func_params = /[\\s,\\(\\)]/g; // \u6B63\u5219 \u7A7A\u683C\nconst REGX_func_params = /@[a-zA-Z-_\\d]*/g;\nconst REGX_less_params = /@[a-zA-Z-_\\d]+/g;\n\nconst getDefinedFuncStartIndex = (str: string, start: number): number => {\n  return start + str.substring(start).search('{');\n};\n\nconst getDefinedFuncEndIndex = (str: string, start: number): number => {\n  // \u51FD\u6570\u5185\u5BB9\n  let lcb = []; // left curly braces\n  let rcb = []; // right curly braces\n  // flag index\n  const fi = [...str.substring(start).matchAll(/[{}]/g)].find((item) => {\n    if (item[0] === '{') {\n      lcb.push(item.index);\n    }\n    if (item[0] === '}') {\n      rcb.push(item.index);\n    }\n    return lcb.length !== 0 && lcb.length === rcb.length;\n  }).index;\n  return start + fi;\n};\n\nconst getDefinedFuncParams = (fdn: string): string[] => {\n  // function defined name\n  const params = [...fdn.matchAll(REGX_func_params)]\n    .map((o) => o[0])\n    .filter((o) => !!o);\n  return params;\n};\n\nconst getUsedFuncEndIndex = (str: string, start: number) => {\n  return start + str.substring(start).search(';');\n};\n\nconst getUsedFuncParams = (fus: string, name: string): string[] => {\n  // function used string\n  const arr = fus.split(REGX_used_func_params);\n  if (arr[0] !== name) {\n    return [];\n  }\n  return arr.filter(\n    (item, index) => index !== 0 && arr.length - 1 !== index && item\n  );\n};\n\n/**\n * \u83B7\u53D6\u51FD\u6570\u53D8\u91CF\u7684 \u5C5E\u6027\n * @param str \u51FD\u6570\u540D\u5F00\u5934\u7684\u5B57\u7B26\u4E32 .setSize(){xxxx}xxxxxxx\n * @param name \u51FD\u6570\u540D .setSize\n * @param start \n * @returns {\n    type: lessFuncTypeEnum.defined | lessFuncTypeEnum.used;\n    name: string;\n    start: number; // \u6807\u8BB0\u5B9A\u4E49\u51FD\u6570 \u5F00\u59CB\u7684 index\n    end: number; // \u6807\u8BB0\u5B9A\u4E49\u51FD\u6570 \u7ED3\u675F\u7684 index\n    params: string[];\n    content?: string;\n * }\n */\nconst getLessFunctionImpl = (\n  str: string,\n  name: string,\n  start: number = 0\n): funcDefinedProps | funcUsedProps => {\n  const fi = str.substring(start).search(/[{;]/g) + start; // flag index\n  // function flag string\n  const ffs = str.substring(start, fi + 1).replace(REGX_space, '');\n\n  let type = 'others';\n  if (ffs.indexOf(')when(') > -1) {\n    type = 'others';\n  } else if (ffs.substr(-2) !== '){') {\n    type = 'used';\n  } else {\n    type = 'defined';\n  }\n  if (type === 'used') {\n    const end = getUsedFuncEndIndex(str, start);\n    // function used string\n    const fus = str.substring(start, end);\n    const params = getUsedFuncParams(fus, name);\n\n    // fucntion obj\n    const fo: funcUsedProps = {\n      name,\n      start,\n      type: lessFuncTypeEnum.used,\n      end,\n      params,\n    };\n    return fo;\n  } else if (type === 'defined') {\n    // func defined start\n    const fds = getDefinedFuncStartIndex(str, start);\n    // func defined end\n    const fde = getDefinedFuncEndIndex(str, fds);\n    //func defined content\n    const fdc = str.substring(fds + 1, fde);\n    const params = getDefinedFuncParams(str.substring(start, fds));\n    const fo: funcDefinedProps = {\n      name,\n      start: fds,\n      end: fde,\n      type: lessFuncTypeEnum.defined,\n      params,\n      content: fdc,\n    };\n    return fo;\n  }\n};\n\n/**\n * \u5728\u6BCF\u4E2A\u4F7F\u7528\u5230\u51FD\u6570\u7684\u5730\u65B9\u5C55\u5F00\u51FD\u6570\u4E3B\u4F53\u90E8\u5206\n */\nconst expandFunctionImpl = (\n  str: string,\n  fu: funcUsedProps,\n  fd: { [name: string]: funcDefinedProps }\n): string => {\n  /**\n   * \u66FF\u6362\u51FD\u6570\u53D8\u91CF\n   * [@color, @height, small]\n   * [@primary-color-1, @padding-lg]\n   */\n  const pm: strObjProps = {}; // params map\n  fu.params.forEach((value, index) => {\n    let k = fd[fu.name].params[index];\n    pm[k] = value;\n  });\n\n  if (Object.keys(pm).length > 0) {\n    // function defined_content\n    let fdc = fd[fu.name].content;\n    const arr = [...fdc.matchAll(REGX_less_params)].reverse();\n    arr.forEach((p) => {\n      let variable_name = p[0];\n      let index = p.index;\n      let length = variable_name.length;\n\n      if (pm[variable_name]) {\n        fdc =\n          fdc.substring(0, index) +\n          pm[variable_name] +\n          fdc.substring(index + length);\n      }\n    });\n\n    str = str.substring(0, fu.start) + fdc + str.substring(fu.end + 1);\n  }\n  return str;\n};\n\n/**\n *\n * @param str\n * @param funcDefined\n * @returns\n */\nconst getNestFunction = (\n  str: string,\n  fd: { [name: string]: funcDefinedProps }\n): string => {\n  // function regx array\n  let fra = [...str.matchAll(REGX_func_name)];\n\n  // \u627E\u5230\u4E00\u4E2A\u8C03\u7528\u7684\u51FD\u6570\uFF0C\u5E76\u4E14\u6B64\u51FD\u6570\u5728\u5176\u4ED6\u9884\u5B9A\u4E49\u7684\u51FD\u6570\u4E2D\u88AB\u4F7F\u7528\u4E86\u3002\n  // func Defined obj\n  const fdo = fra.find((item) => fd[item[0]]);\n\n  if (!fdo) {\n    return str;\n  }\n\n  const end = getUsedFuncEndIndex(str, fdo.index);\n  const func_used: funcUsedProps = {\n    type: lessFuncTypeEnum.used,\n    name: fdo[0],\n    start: fdo.index, // \u6807\u8BB0\u4F7F\u7528\u51FD\u6570 \u5F00\u59CB\u7684 index\n    end, // \u6807\u8BB0\u4F7F\u7528\u51FD\u6570 \u7ED3\u675F\u7684 index\n    params: getUsedFuncParams(str.substring(fdo.index, end), fdo[0]),\n  };\n  str = expandFunctionImpl(str, func_used, fd);\n\n  // return str;\n  return getNestFunction(str, fd);\n};\n\n/**\n * \u627E\u5230 less \u6587\u4EF6\u4E2D\u5BF9\u5E94\u7684 function \u5C5E\u6027\n * @param str less \u5B57\u7B26\u4E32\n * @return lessFunctionProps\n */\nexport const getLessFunction = async (\n  str: string\n): Promise<lessFunctionProps> => {\n  // function regx array\n  const fra = [...str.matchAll(REGX_func_name)];\n  return Promise.all(\n    fra.map((item) => {\n      const func_name = item[0];\n      const start = item.index;\n      return getLessFunctionImpl(str, func_name, start);\n    })\n  )\n    .then((arr) => {\n      const data: lessFunctionProps = {\n        funcUsedList: [],\n        funcDefined: {},\n      };\n      arr\n        .filter((i) => i)\n        .forEach((obj) => {\n          if (obj.type === 'used') {\n            data.funcUsedList.push(obj);\n          }\n          if (obj.type === 'defined') {\n            data.funcDefined[obj.name] = obj;\n          }\n        });\n      return data;\n    })\n    .then((data) => {\n      // \u5904\u7406\u9884\u5B9A\u4E49\u51FD\u6570\u4E2D\u6709\u4F7F\u7528\u5230\u5176\u4ED6\u51FD\u6570 \u7684\u60C5\u51B5\n      Object.keys(data.funcDefined).forEach((func_name) => {\n        data.funcDefined[func_name].content = getNestFunction(\n          data.funcDefined[func_name].content,\n          data.funcDefined\n        );\n      });\n      return data;\n    });\n};\n\n/**\n * \u5904\u7406 less \u5C55\u5F00\u51FD\u6570\n *\n * #1 \u83B7\u53D6\u51FD\u6570 Props\n *    1 \u627E\u5230\u5339\u914D\u7684\u51FD\u6570\u540D\n *    2 \u5982\u679C\u51FD\u6570\u9884\u5B9A\u4E49\u5185\u6709\u5D4C\u5957\u51FD\u6570\uFF0C \u5C55\u5F00\u6240\u6709\u5D4C\u5957\u51FD\u6570\n *\n * #2 \u5728\u6BCF\u4E2A\u4F7F\u7528\u5230\u51FD\u6570\u7684\u5730\u65B9\u5C55\u5F00\u51FD\u6570\u4E3B\u4F53\u90E8\u5206\n */\nexport const expandFunction = async (\n  str: string,\n  commonFuncDefined?: { [name: string]: funcDefinedProps }\n): Promise<string> => {\n  return getLessFunction(str).then((data) => {\n    const funcUsedList = data.funcUsedList.reverse();\n    const funcDefinedAll = { ...commonFuncDefined, ...data.funcDefined };\n\n    funcUsedList.forEach((funcUsed) => {\n      const c = str.substring(funcUsed.start, funcUsed.end);\n      if (funcDefinedAll[funcUsed.name] && c.startsWith(funcUsed.name)) {\n        str = expandFunctionImpl(str, funcUsed, data.funcDefined);\n      }\n    });\n    return str;\n  });\n};\n\nexport default expandFunction;\n", "import fs from 'fs-extra';\nimport path from 'path';\nimport less from 'less';\nimport { strObjProps, themeItemProps, lessysConfigProps } from './Types';\n\nconst REGX_line = /\\n/g; // \u6362\u884C\u7B26\nconst REGX_variables = /;/g;\n\n/**\n * \u5220\u9664\u672A\u4F7F\u7528\u5230\u53D8\u91CF\u7684\u884C\n */\nexport const removeConstantLine = (str: string) => {\n  return str\n    .split(REGX_line)\n    .filter((item) => {\n      return (\n        item.includes('@') ||\n        item.includes('{') ||\n        item.includes('}') ||\n        item.includes(',') ||\n        item.includes('.') ||\n        item.includes('&') ||\n        item.includes('>')\n      );\n    })\n    .join('\\n');\n};\n\n/**\n * \n * @param {str} str less string\n * @input \n    // @breakpoint: 1600px;\n    @table-bg-error: #ffd3c1;\n   @output \n    @table-bg-error: #ffd3c1;\n */\nexport const removeComments = (str: string): string => {\n  const REGX_token_start_array_1 = /\\/\\//g;\n  const REGX_token_end_array_1 = /\\n/g;\n  const REGX_token_start_array_2 = /\\/\\*/g;\n  const REGX_token_end_array_2 = /\\*\\//g;\n\n  let tsa1 = [...str.matchAll(REGX_token_start_array_1)].map(\n    (item) => item.index\n  ); // [80, 82, 84, 131, 181];\n  let tsa2 = [...str.matchAll(REGX_token_start_array_2)].map(\n    (item) => item.index\n  ); // [134, 430];\n  let tea1 = [...str.matchAll(REGX_token_end_array_1)].map(\n    (item) => item.index\n  ); // [36, 37, 79, 130, 179, 180, 242];\n  let tea2 = [...str.matchAll(REGX_token_end_array_2)].map(\n    (item) => item.index\n  ); // [485];\n\n  const comments = [];\n  while (tsa1.length > 0 || tsa2.length > 0) {\n    // \u5224\u65AD\u662F // \u8FD8\u662F /*\n    let tType = 'tsa1';\n    tsa1[0] < tsa2[0] ? 'tsa1' : 'tsa2';\n    if (tsa1.length === 0 || tsa2[0] < tsa1[0]) {\n      tType = 'tsa2';\n    }\n    // \u627E\u5230 \u4E00\u6BB5\u6CE8\u91CA\u7684 \u8D77\u70B9\u5230\u7EC8\u70B9\u3002\n    let tsi = 0;\n    let tei = 0;\n    if (tType === 'tsa1') {\n      tsi = tsa1[0];\n      tei = tea1.filter((i) => i > tsi)[0];\n    } else {\n      tsi = tsa2[0];\n      tei = tea2.filter((i) => i > tsi)[0];\n    }\n    comments.unshift([tsi, tei, tType]);\n\n    // \u91CD\u7F6E \u6570\u7EC4\n    tsa1 = tsa1.filter((i) => i > tei);\n    tsa2 = tsa2.filter((i) => i > tei);\n    tea1 = tea1.filter((i) => i > tei);\n    tea2 = tea2.filter((i) => i > tei);\n  }\n\n  // \u5220\u9664 str \u4E2D\u7684\u6CE8\u91CA\n  if (comments.length > 0) {\n    comments.forEach((arr) => {\n      let si = arr[0];\n      let ei = arr[1];\n      let tType = arr[2];\n\n      if (typeof si === 'number' && typeof ei === 'number') {\n        si = tType === 'tsa2' ? si : si - 1;\n        ei = tType === 'tsa2' ? ei + 2 : ei;\n        str = str.substring(0, si) + str.substring(ei);\n      }\n    });\n  }\n  return str;\n};\n\n/**\n * @param lessPath less \u6587\u4EF6\u8DEF\u5F84\n * @returns string\n */\nexport const getFileUTF8 = async (lessPath: string) =>\n  fs.readFile(lessPath, 'utf8');\n\n/**\n *\n * @param str less \u5B57\u7B26\u4E32\n * @returns {\n *   '@primary-color': '#fff'\n * }\n */\nexport const getLessVariable = (str: string): strObjProps => {\n  return removeComments(str)\n    .split(REGX_variables)\n    .reduce((prev: strObjProps = {}, current) => {\n      if (current.includes(':')) {\n        let variable = current.split(':')[0].trim();\n        let variv = current.split(':')[1];\n        // \u53BB\u6389\u6B64\u7C7B\u60C5\u51B5\uFF1A @{ant-preix}-button: { }\n        if (\n          variable.includes('@{') ||\n          variable.includes('{') ||\n          variable.includes('//') ||\n          variable.includes('&') ||\n          variable.indexOf('@') === -1\n        ) {\n          return prev;\n        }\n        if (variable && typeof variable === 'string') {\n          prev[variable] = variv;\n        }\n      }\n      return prev;\n    }, {});\n};\n\n// @import './xxx' => @import 'E:/xxx'\n// \u5C06less \u6587\u4EF6\u4E2D\u7684\u76F8\u5BF9\u8DEF\u5F84\u8F6C\u6362\u4E3A \u7EDD\u5BF9\u8DEF\u5F84\nexport const transferAbsolutePath = (lessStr: string, dir: string): string => {\n  // \u627E\u5230 @import './Default.less' \u884C\n  let regx1 = /@import\\s?\\S*;/g;\n  let regx2 = /[\\'|\\\"]/g;\n\n  // ['../theme/Default.less']\n  const pathArr = [...lessStr.matchAll(regx1)].map((item) => {\n    let lineStr = item[0];\n    let startIndex = [...lineStr.matchAll(regx2)][0].index + 1;\n    let endIndex = [...lineStr.matchAll(regx2)][1].index;\n    return lineStr.substring(startIndex, endIndex);\n  });\n\n  const transferPathArr = pathArr.map((item) => {\n    if (!path.isAbsolute(item)) {\n      // return path.resolve(dir, item)\n      return path.resolve(dir, item).replace(/\\\\/g, '/');\n    }\n    return item;\n  });\n\n  transferPathArr.forEach((newPath, index) => {\n    let oldPath = pathArr[index];\n    lessStr = lessStr.replace(oldPath, newPath);\n  });\n\n  return lessStr;\n};\n\n// \u5F85\u5904\u7406\u7F16\u8BD1css \u65F6\u53D6\u4E0D\u540C\u7684 theme \u95EE\u9898\nexport const lessToCss = async (\n  lessInputStr: string,\n  themeItem: themeItemProps\n): Promise<string> => {\n  const renderOptions = {\n    math: 'always' as any, // \u8FD0\u7B97 10px/2\n    modifyVars: themeItem.lessVariables,\n  };\n  return less\n    .render(lessInputStr, renderOptions)\n    .then((output) => output.css.replace(/:global ?/g, ''))\n    .then(removeComments)\n    .catch((e) => {\n      console.log(e);\n      return '';\n    });\n};\n\nexport const getUserConfig = async (): Promise<lessysConfigProps> => {\n  try {\n    const configPath = path.resolve('lessys.config.js');\n    return require(configPath);\n  } catch (err) {\n    if (err.code !== 'MODULE_NOT_FOUND') {\n      console.error('lessys.config.js file cannot be found, please create it.');\n    }\n  }\n};\n", "import { strObjProps } from './Types';\nimport { getLessVariable } from './util';\n\nconst REGX_br = /\\n/g; // \u6B63\u5219 \u6362\u884C\u7B26\nconst REGX_less_params = /@[a-zA-Z-_\\d]+/g;\n\n/**\n * \u66FF\u6362less \u6587\u4EF6\u4E2D\u7684\u53D8\u91CF\n *   #1 \u627E\u5230 less \u6587\u4EF6\u4E2D\u5B9A\u4E49\u7684\u53D8\u91CF\n *   #2 \u62BD\u79BB\u51FA\u53EA\u4F7F\u7528\u5230\u9884\u5B9A\u4E49\u53D8\u91CF\u7684\u884C\n */\nexport const extractVariablesImpl = (\n  str: string,\n  variable: strObjProps\n): string => {\n  return (\n    str\n      .split(REGX_br)\n      // line string\n      .filter((ls) => {\n        if (\n          ls.includes('{') ||\n          ls.includes('}') ||\n          ls.includes(',') ||\n          ls.includes('.') ||\n          ls.includes('&') ||\n          ls.includes('>')\n        ) {\n          // \u51FD\u6570\uFF0Cclass \u58F0\u660E\n          return true;\n        }\n\n        if (ls.includes('@')) {\n          // \u5224\u65AD\u662F\u5426\u4F7F\u7528\u4E86 \u9884\u5B9A\u7684\u53D8\u91CF\n          let is = ls.search(':'); // indicator start\n\n          // line_less_variables_array\n          const llva = [...ls.substring(is).matchAll(REGX_less_params)].map(\n            (i) => i[0].trim()\n          );\n          return llva.some((k) => variable[k]);\n        }\n        return false;\n      })\n      .join('\\n')\n  );\n};\n\n/**\n *\n * @param str less \u5B57\u7B26\u4E32\n * @param option\n * \u6839\u636E\u9884\u5B9A\u4E49\u7684\u53D8\u91CF\u62BD\u79BB less \u7ED3\u6784\n *\n * @returns less \u5B57\u7B26\u4E32\n */\nexport const extractVariables = (\n  str: string,\n  variable: strObjProps\n): Promise<string> => {\n  return Promise.resolve(getLessVariable(str)).then((fv) => {\n    // file variable\n    if (typeof variable === 'object') {\n      // merge variable\n      const mv: strObjProps = {\n        ...variable,\n      };\n\n      for (const k in fv) {\n        if (Object.prototype.hasOwnProperty.call(fv, k)) {\n          const vk = fv[k].trim();\n          if (mv[vk]) {\n            mv[k] = vk;\n          }\n        }\n      }\n\n      return extractVariablesImpl(str, mv);\n    }\n    return str;\n  });\n};\n\nexport default extractVariables;\n", "import { removeComments, removeConstantLine } from './util';\nimport prettier from 'prettier';\n\n/**\n * \u683C\u5F0F\u5316 less \u6587\u4EF6\u5B57\u7B26\u4E32\n * @param str less string\n * @returns string\n */\nexport const formatLess = async (less_str: string): Promise<string> => {\n  return Promise.resolve(less_str)\n    .then(removeConstantLine)\n    .then((str) => {\n      return prettier.format(str, {\n        arrowParens: 'always',\n        parser: 'less',\n        bracketSpacing: true,\n        embeddedLanguageFormatting: 'auto',\n        htmlWhitespaceSensitivity: 'css',\n        insertPragma: false,\n        printWidth: 120,\n        proseWrap: 'preserve',\n        quoteProps: 'as-needed',\n        requirePragma: false,\n        semi: true,\n        singleQuote: false,\n        tabWidth: 2,\n        useTabs: false,\n        vueIndentScriptAndStyle: false,\n      });\n    })\n    .then(removeComments);\n};\n\nexport default formatLess;\n", "import path from 'path';\nimport gulp, { watch } from 'gulp';\nimport gulpConcat from 'gulp-concat';\nimport { generateOneLess, getCommonTheme } from './index';\nimport { lessysConfigProps, themeItemProps } from './Types';\nimport { getUserConfig } from './util';\n\n// #1 \u5C06 monitor \u4E2D\u7684 less \u6587\u4EF6\u8F6C\u6362\u4E3A css \u6587\u4EF6\n// #2 \u5408\u5E76 css \u6587\u4EF6\nexport const mergeThemeFiles = async (\n  commonThemeList: themeItemProps[],\n  config: lessysConfigProps\n) => {\n  return commonThemeList.map((theme) => {\n    const regx = `${config.outputDir}/monitor/**/${theme.cateKey}/${theme.outputCssName}`;\n    const outputThemeDir = `${config.outputDir}/${theme.cateKey}/`;\n    gulp\n      .src(regx)\n      .pipe(gulpConcat(theme.outputCssName))\n      .pipe(gulp.dest(outputThemeDir));\n  });\n};\n\nconst mergeCss = (\n  commonThemeList: themeItemProps[],\n  config: lessysConfigProps,\n  watchingLessPath: string\n) => {\n  return Promise.all(\n    commonThemeList.map((item) => {\n      const regx = path.resolve(\n        config.componentDir + '/**/' + item.cateKey + '/' + item.outputCssName\n      );\n      gulp\n        .src(regx)\n        .pipe(gulpConcat(item.outputCssName))\n        .pipe(gulp.dest(path.parse(item.outputCssPath).dir));\n    })\n  ).then(() => `${watchingLessPath} has transferred successfully`);\n};\n\nconst handleLessChange = async (lessPath: string) => {\n  const config = await getUserConfig();\n  const commonThemeList = await getCommonTheme(config);\n  return generateOneLess(commonThemeList, config, lessPath).then(() =>\n    mergeCss(commonThemeList, config, lessPath)\n  );\n};\n\nexport const monitor = async () => {\n  const entryConfig = await getUserConfig();\n  const watcher = watch([`${entryConfig.componentDir}/**/*.less`]);\n\n  watcher.on('change', function (path, __stats__) {\n    handleLessChange(path).then(console.log);\n  });\n\n  watcher.on('unlink', function (path, stats) {\n    handleLessChange(path).then(console.log);\n  });\n\n  // watcher.on('add', function (path, stats) {\n  //   console.log(`File ${path} was added`);\n  // });\n};\n"],
  "mappings": "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",
  "names": []
}
